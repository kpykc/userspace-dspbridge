<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Framework Components: dman3.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dman3.h</h1><a href="dman3_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* </span>
<a name="l00002"></a>00002 <span class="comment"> *  Copyright 2007</span>
<a name="l00003"></a>00003 <span class="comment"> *  Texas Instruments Incorporated</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  All rights reserved.  Property of Texas Instruments Incorporated</span>
<a name="l00006"></a>00006 <span class="comment"> *  Restricted rights to use, duplicate or disclose this code are</span>
<a name="l00007"></a>00007 <span class="comment"> *  granted through contract.</span>
<a name="l00008"></a>00008 <span class="comment"> * </span>
<a name="l00009"></a>00009 <span class="comment"> */</span>
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef DMAN3_</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define DMAN3_</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00040"></a>00040 <span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="ialg_8h.html">ti/xdais/ialg.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="idma3_8h.html">ti/xdais/idma3.h</a>&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#gc5bb90e4340386e641863309330e4fb5">00045</a> <span class="preprocessor">#define DMAN3_MAXDMARECS     32  </span>
<a name="l00048"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#gb4a261c271c8d0f1e9843eada6b263e8">00048</a> <span class="preprocessor">#define DMAN3_MAXGROUPS      20  </span>
<a name="l00057"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#g462d3887266b42b69cf21c65e87dc99d">00057</a> <span class="preprocessor">#define DMAN3_SOK             0  </span>
<a name="l00058"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#g70d091dae946805ff49ab47b903483a7">00058</a> <span class="preprocessor">#define DMAN3_EOUTOFMEMORY   -1  </span>
<a name="l00060"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#ge81e9235f9755ac2e6a6279401c8798d">00060</a> <span class="preprocessor">#define DMAN3_EFAIL          -2  </span>
<a name="l00061"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#g097f382f6603cc69c2d998c0ce6b9dfe">00061</a> <span class="preprocessor">#define DMAN3_EFREE          -3  </span>
<a name="l00063"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#gb04511fe9f738b3a189758163e75f1d2">00063</a> <span class="preprocessor">#define DMAN3_EOUTOFTCCS     -4  </span>
<a name="l00066"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#g45977d32b34b6e98e33b6510c9164dee">00066</a> <span class="preprocessor">#define DMAN3_EOUTOFPARAMS   -5  </span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00080"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#gb88a4f4fc347844728e7c0d6b46c5ecf">00080</a> <span class="keyword">typedef</span> Bool (*<a class="code" href="group___d_s_p_d_m_a_n3.html#gb88a4f4fc347844728e7c0d6b46c5ecf">DMAN3_ScratchAllocFxn</a>)(<a class="code" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg, Int mutexId,
<a name="l00081"></a>00081         <a class="code" href="struct_i_a_l_g___mem_rec.html">IALG_MemRec</a> *memTab, Int numRecs);
<a name="l00082"></a>00082 
<a name="l00088"></a><a class="code" href="group___d_s_p_d_m_a_n3.html#g5c51dee2c06d775005a8cf4db004782f">00088</a> <span class="keyword">typedef</span> Void (*<a class="code" href="group___d_s_p_d_m_a_n3.html#g5c51dee2c06d775005a8cf4db004782f">DMAN3_ScratchFreeFxn</a>)(Int mutexId, Void *addr, Uns size);
<a name="l00089"></a>00089     
<a name="l00090"></a>00090 
<a name="l00096"></a><a class="code" href="struct_d_m_a_n3___params.html">00096</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_d_m_a_n3___params.html">DMAN3_Params</a> {
<a name="l00097"></a>00097     <span class="comment">/*</span>
<a name="l00098"></a>00098 <span class="comment">     * qdmaPaRamBase: Physical base address of the PARAM0 in the EDMA3/QDMA</span>
<a name="l00099"></a>00099 <span class="comment">     * hardware whose resources are being managed by DMAN3.</span>
<a name="l00100"></a>00100 <span class="comment">     *</span>
<a name="l00101"></a>00101 <span class="comment">     * The maxPaRamEntries:  Total number of PARAM Table entries on the</span>
<a name="l00102"></a>00102 <span class="comment">     * hardware (eg, for IVA2 this is 128, for Himalaya, this is 256).</span>
<a name="l00103"></a>00103 <span class="comment">     *</span>
<a name="l00104"></a>00104 <span class="comment">     * paRamBaseIndex: (0&gt;value&gt;255) represents the first PARAM TABLE ENTRY</span>
<a name="l00105"></a>00105 <span class="comment">     * NUMBER that is assigned by configuration for exclusive DMAN3 allocation.</span>
<a name="l00106"></a>00106 <span class="comment">     *</span>
<a name="l00107"></a>00107 <span class="comment">     * The numPaRamEntries:  number of PARAM Table entries starting at</span>
<a name="l00108"></a>00108 <span class="comment">     * DMAN3_PARAM_BASE_INDEX assigned by configuration for exclusive DMAN3</span>
<a name="l00109"></a>00109 <span class="comment">     * allocation.</span>
<a name="l00110"></a>00110 <span class="comment">     */</span>
<a name="l00111"></a><a class="code" href="struct_d_m_a_n3___params.html#766e441c25336fb3a36d56c711cb08e4">00111</a>     Uns    *<a class="code" href="struct_d_m_a_n3___params.html#766e441c25336fb3a36d56c711cb08e4">qdmaPaRamBase</a>;     
<a name="l00112"></a><a class="code" href="struct_d_m_a_n3___params.html#58339ef320bf8a83a2b995124965405e">00112</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#58339ef320bf8a83a2b995124965405e">maxPaRamEntries</a>;   
<a name="l00113"></a><a class="code" href="struct_d_m_a_n3___params.html#cd68bdec25ab7f38188f61bf2fda5ceb">00113</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#cd68bdec25ab7f38188f61bf2fda5ceb">paRamBaseIndex</a>;    
<a name="l00114"></a><a class="code" href="struct_d_m_a_n3___params.html#cde436b501fefb284f4cf43d87dd9e0a">00114</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#cde436b501fefb284f4cf43d87dd9e0a">numPaRamEntries</a>;   
<a name="l00116"></a>00116     <span class="comment">/*</span>
<a name="l00117"></a>00117 <span class="comment">     * maxQdmaChannels: contains the total number of Physical QDMA channels</span>
<a name="l00118"></a>00118 <span class="comment">     * available on the hardware (eg, 8 for DaVinci, 4 for IVA2).</span>
<a name="l00119"></a>00119 <span class="comment">     *</span>
<a name="l00120"></a>00120 <span class="comment">     * numQdmaChannels: contains the number of Physical QDMA channels</span>
<a name="l00121"></a>00121 <span class="comment">     * that are assigned to DMAN3 via configuration.</span>
<a name="l00122"></a>00122 <span class="comment">     *</span>
<a name="l00123"></a>00123 <span class="comment">     * qdmaChannels: array of size DMAN3_NUM_QDMA_CHANNELS that will contain </span>
<a name="l00124"></a>00124 <span class="comment">         * the channel numbers of the Physical QDMA channels assigned to DMAN3 via </span>
<a name="l00125"></a>00125 <span class="comment">         * configuration. </span>
<a name="l00126"></a>00126 <span class="comment">     */</span>
<a name="l00127"></a><a class="code" href="struct_d_m_a_n3___params.html#c8625cdf0b069aea5d9456be100aef33">00127</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#c8625cdf0b069aea5d9456be100aef33">maxQdmaChannels</a>;  
<a name="l00128"></a><a class="code" href="struct_d_m_a_n3___params.html#354db3352d61cd71924bdd6c8827f5a5">00128</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#354db3352d61cd71924bdd6c8827f5a5">numQdmaChannels</a>;  
<a name="l00129"></a><a class="code" href="struct_d_m_a_n3___params.html#3ce746095fcc42779b01362ba9fe2359">00129</a>     Uns    *<a class="code" href="struct_d_m_a_n3___params.html#3ce746095fcc42779b01362ba9fe2359">qdmaChannels</a>;     
<a name="l00131"></a>00131     <span class="comment">/*</span>
<a name="l00132"></a>00132 <span class="comment">     * tccAllocationMaskH and tccAllocationMaskL:  are 32-bit bitmasks</span>
<a name="l00133"></a>00133 <span class="comment">     * representing configuration provided list of TCCs for exclusive DMAN3</span>
<a name="l00134"></a>00134 <span class="comment">     * allocation.</span>
<a name="l00135"></a>00135 <span class="comment">     *</span>
<a name="l00136"></a>00136 <span class="comment">     * For example, for TCC's in the range 0-31 the Low Mask</span>
<a name="l00137"></a>00137 <span class="comment">     * (tccAllocationMaskL) is configured so that a '1' in bit position 'i'</span>
<a name="l00138"></a>00138 <span class="comment">     * indicates the TCC 'i' is assigned to DMAN3.</span>
<a name="l00139"></a>00139 <span class="comment">     */</span>
<a name="l00140"></a><a class="code" href="struct_d_m_a_n3___params.html#1866abe117288a1d94b9ac62039b7f46">00140</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#1866abe117288a1d94b9ac62039b7f46">tccAllocationMaskH</a>;    
<a name="l00141"></a><a class="code" href="struct_d_m_a_n3___params.html#ce9a03fc79f8cf2727f2753693a66caa">00141</a>     Uns     <a class="code" href="struct_d_m_a_n3___params.html#ce9a03fc79f8cf2727f2753693a66caa">tccAllocationMaskL</a>;    
<a name="l00151"></a><a class="code" href="struct_d_m_a_n3___params.html#1acba3008b12df10cad8b80bb5991e55">00151</a>     Int <a class="code" href="struct_d_m_a_n3___params.html#1acba3008b12df10cad8b80bb5991e55">heapInternal</a>;   
<a name="l00152"></a>00152     
<a name="l00161"></a><a class="code" href="struct_d_m_a_n3___params.html#5e397135231bc45e7e3ac6d4e1ae3166">00161</a>     Int <a class="code" href="struct_d_m_a_n3___params.html#5e397135231bc45e7e3ac6d4e1ae3166">heapExternal</a>;   
<a name="l00162"></a>00162 
<a name="l00163"></a>00163     <span class="comment">/*</span>
<a name="l00164"></a>00164 <span class="comment">     *  These are arrays containing the number of TCCs and</span>
<a name="l00165"></a>00165 <span class="comment">     *  PaRam entries that will be assigned to groups for sharing.</span>
<a name="l00166"></a>00166 <span class="comment">     *  Channels created with a given group ID will use TCCs and PaRams</span>
<a name="l00167"></a>00167 <span class="comment">     *  allocated for that group ID, and may share them with other channels</span>
<a name="l00168"></a>00168 <span class="comment">     *  created with the same group ID.</span>
<a name="l00169"></a>00169 <span class="comment">     */</span>
<a name="l00170"></a><a class="code" href="struct_d_m_a_n3___params.html#d431ed7c6e66d11a1c1cdbf9518494f0">00170</a>     SmUns         <a class="code" href="struct_d_m_a_n3___params.html#d431ed7c6e66d11a1c1cdbf9518494f0">numTccGroup</a>[<a class="code" href="group___d_s_p_d_m_a_n3.html#gb4a261c271c8d0f1e9843eada6b263e8">DMAN3_MAXGROUPS</a>];    
<a name="l00171"></a><a class="code" href="struct_d_m_a_n3___params.html#b722aece79c8c43eadd6b30d3a828a74">00171</a>     MdUns         <a class="code" href="struct_d_m_a_n3___params.html#b722aece79c8c43eadd6b30d3a828a74">numPaRamGroup</a>[<a class="code" href="group___d_s_p_d_m_a_n3.html#gb4a261c271c8d0f1e9843eada6b263e8">DMAN3_MAXGROUPS</a>];  
<a name="l00181"></a><a class="code" href="struct_d_m_a_n3___params.html#c1550ea0e1f8b5442f88eccc395a491c">00181</a>     Bool          <a class="code" href="struct_d_m_a_n3___params.html#c1550ea0e1f8b5442f88eccc395a491c">idma3Internal</a>;
<a name="l00182"></a>00182 
<a name="l00192"></a><a class="code" href="struct_d_m_a_n3___params.html#5fd92c4be106cf2614490abffdd09b60">00192</a>     <a class="code" href="group___d_s_p_d_m_a_n3.html#gb88a4f4fc347844728e7c0d6b46c5ecf">DMAN3_ScratchAllocFxn</a> <a class="code" href="struct_d_m_a_n3___params.html#5fd92c4be106cf2614490abffdd09b60">scratchAllocFxn</a>;
<a name="l00193"></a>00193 
<a name="l00202"></a><a class="code" href="struct_d_m_a_n3___params.html#383ff9a30cfc36cb8ab0b0d8a4701fce">00202</a>     <a class="code" href="group___d_s_p_d_m_a_n3.html#g5c51dee2c06d775005a8cf4db004782f">DMAN3_ScratchFreeFxn</a> <a class="code" href="struct_d_m_a_n3___params.html#383ff9a30cfc36cb8ab0b0d8a4701fce">scratchFreeFxn</a>;
<a name="l00203"></a>00203 
<a name="l00209"></a><a class="code" href="struct_d_m_a_n3___params.html#35fa90f301f8b215cb385a78d4fb215d">00209</a>     Uns <a class="code" href="struct_d_m_a_n3___params.html#35fa90f301f8b215cb385a78d4fb215d">nullPaRamIndex</a>;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 } <a class="code" href="struct_d_m_a_n3___params.html">DMAN3_Params</a>;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 
<a name="l00217"></a>00217 <span class="keyword">extern</span> far <a class="code" href="struct_d_m_a_n3___params.html">DMAN3_Params</a> <a class="code" href="group___d_s_p_d_m_a_n3.html#g553609efedb936222e4492f0ffa3d1cc">DMAN3_PARAMS</a>;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 
<a name="l00263"></a>00263 <span class="keyword">extern</span> Int <a class="code" href="group___d_s_p_d_m_a_n3.html#ge0e5031bc5e947da1bd5d12cca1c5e00">DMAN3_grantDmaChannels</a>(Int groupId, <a class="code" href="struct_i_a_l_g___obj.html">IALG_Handle</a> algHandle[],
<a name="l00264"></a>00264         <a class="code" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *dmaFxns[], Int numAlgs);
<a name="l00265"></a>00265 
<a name="l00269"></a>00269 <span class="keyword">extern</span> Void <a class="code" href="group___d_s_p_d_m_a_n3.html#gc26a2a6153c50b10dc3ae9106bfa8594">DMAN3_exit</a>(Void);
<a name="l00270"></a>00270 
<a name="l00312"></a>00312 <span class="keyword">extern</span> Int <a class="code" href="group___d_s_p_d_m_a_n3.html#gee927c5ad460e5e5a122471ccb047db1">DMAN3_createChannels</a>(Int groupId, <a class="code" href="struct_i_d_m_a3___channel_rec.html">IDMA3_ChannelRec</a> dmaTab[],
<a name="l00313"></a>00313         Int numChans);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00323"></a>00323 <span class="keyword">extern</span> Void <a class="code" href="group___d_s_p_d_m_a_n3.html#gf0a672c8ba5962dabc8b319978aafd3b">DMAN3_init</a>(Void);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325 
<a name="l00349"></a>00349 <span class="keyword">extern</span> Int  <a class="code" href="group___d_s_p_d_m_a_n3.html#g664b5e2445c2ec3a0ed9e14f8cfc1d20">DMAN3_releaseDmaChannels</a>(<a class="code" href="struct_i_a_l_g___obj.html">IALG_Handle</a> algHandle[],
<a name="l00350"></a>00350     <a class="code" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *dmaFxns[], Int numAlgs);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00368"></a>00368 <span class="keyword">extern</span> Int <a class="code" href="group___d_s_p_d_m_a_n3.html#g2d14c4952c1194b913ac6e8bb7f0e9d5">DMAN3_freeChannels</a>(<a class="code" href="struct_i_d_m_a3___obj.html">IDMA3_Handle</a> channelTab[], Int numChans);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span>}
<a name="l00373"></a>00373 <span class="preprocessor">#endif </span><span class="comment">/* extern "C" */</span>
<a name="l00374"></a>00374 
<a name="l00375"></a>00375  <span class="comment">/* ingroup DSPDMAN3 */</span>
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <span class="preprocessor">#endif </span><span class="comment">/*DMAN3_*/</span>
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 <span class="comment">/*</span>
<a name="l00381"></a>00381 <span class="comment"> *  @(#) ti.sdo.fc.dman3; 1, 0, 1,66; 5-10-2007 10:49:45; /db/atree/library/trees/fc-b12x/src/</span>
<a name="l00382"></a>00382 <span class="comment"> */</span>
<a name="l00383"></a>00383 
</pre></div><hr size="1"><small>
Copyright  2007, Texas Instruments Incorporated</small>
</body>
</html>
