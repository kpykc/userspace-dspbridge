<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Framework Components: DSKT2</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>DSKT2</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
The XDAIS Socket Library provides services to support the creation, initialization, control, and deletion of XDAIS algorithm instance objects. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g6ea3f0bc0c9a697930cf7d8411975ac2">DSKT2_NUM_SCRATCH_GROUPS</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#gb7906673f1c60a08206bd37c7f7d1178">DSKT2_MAX_MEM_ALLOCATION_SIZE</a>&nbsp;&nbsp;&nbsp;0xFFFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#gcb5e98129cb03f61436195c9fd240804">DSKT2_NUM_SHAREDHEAPS</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef Void(*)&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#gc2be66a39e491bc30ef6f01d7a0a4361">DSKT2_CacheWBInvFxn</a> (Ptr blockPtr, size_t byteCnt, Bool wait)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function prototype of cache writeback function: Writes back the memory within the range of blockPtr and blockPtr + byteCnt.  <a href="#gc2be66a39e491bc30ef6f01d7a0a4361"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg</a> (Int scratchMutexId, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepares a xDAIS algorithm instance object to start using its scratch memory.  <a href="#gf946d426d6d9a95040d3967fa746cd7a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g65d8c7ae9d40adcda0c92a9e51c6fd0b">DSKT2_controlAlg</a> (<a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg, <a class="el" href="group__ti__xdais___i_a_l_g.html#g9032f20923ef2ba1d6b88c87a20075fa">IALG_Cmd</a> cmd, <a class="el" href="struct_i_a_l_g___status.html">IALG_Status</a> *status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is a convenience API to call a xDAIS algorithm instance's algControl function.  <a href="#g65d8c7ae9d40adcda0c92a9e51c6fd0b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg</a> (Int scratchMutexId, <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> *fxns, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> parent, <a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> *params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and initializes a xDAIS algorithm instance object.  <a href="#g5528d73c34724bc310404da0dc2fbd69"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2</a> (Int scratchMutexId, <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> *fxns, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> parent, <a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> *params, Int extHeapId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and initializes a xDAIS algorithm instance object.  <a href="#gda6c7f86ed679447cb8f69b0c50a616c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg</a> (Int scratchMutexId, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepares a xDAIS algorithm instance object to give up using its scratch memory.  <a href="#g74b6b6feca63328906acade37d23b597"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g2d252c736a3bb828d9f646cc379ac0e2">DSKT2_deactivateAll</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">All algorithms that have been deactivated lazily are now really deactivate. Any algorithms that are still currently active will be left as is. The number of algorithms that are still active will be returned from this call.  <a href="#g2d252c736a3bb828d9f646cc379ac0e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___d_s_p_d_s_k_t2.html#g8dffa02b3ca1ff6856ce3cf610be7435">DSKT2_freeAlg</a> (Int scratchMutexId, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes a xDAIS algorithm instance object and frees all persistent memory allocated for the instance object.  <a href="#g8dffa02b3ca1ff6856ce3cf610be7435"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g6ea3f0bc0c9a697930cf7d8411975ac2"></a><!-- doxytag: member="dskt2.h::DSKT2_NUM_SCRATCH_GROUPS" ref="g6ea3f0bc0c9a697930cf7d8411975ac2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSKT2_NUM_SCRATCH_GROUPS&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of scratch groups that can be supported. 
<p>
Definition at line <a class="el" href="dskt2_8h-source.html#l00038">38</a> of file <a class="el" href="dskt2_8h-source.html">dskt2.h</a>.
</div>
</div><p>
<a class="anchor" name="gb7906673f1c60a08206bd37c7f7d1178"></a><!-- doxytag: member="dskt2.h::DSKT2_MAX_MEM_ALLOCATION_SIZE" ref="gb7906673f1c60a08206bd37c7f7d1178" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSKT2_MAX_MEM_ALLOCATION_SIZE&nbsp;&nbsp;&nbsp;0xFFFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum memory allocation. 
<p>
Definition at line <a class="el" href="dskt2_8h-source.html#l00043">43</a> of file <a class="el" href="dskt2_8h-source.html">dskt2.h</a>.
</div>
</div><p>
<a class="anchor" name="gcb5e98129cb03f61436195c9fd240804"></a><!-- doxytag: member="dskt2.h::DSKT2_NUM_SHAREDHEAPS" ref="gcb5e98129cb03f61436195c9fd240804" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSKT2_NUM_SHAREDHEAPS&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="dskt2_8h-source.html#l00048">48</a> of file <a class="el" href="dskt2_8h-source.html">dskt2.h</a>.
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gc2be66a39e491bc30ef6f01d7a0a4361"></a><!-- doxytag: member="dskt2.h::DSKT2_CacheWBInvFxn" ref="gc2be66a39e491bc30ef6f01d7a0a4361" args="(Ptr blockPtr, size_t byteCnt, Bool wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Void(*) <a class="el" href="group___d_s_p_d_s_k_t2.html#gc2be66a39e491bc30ef6f01d7a0a4361">DSKT2_CacheWBInvFxn</a>(Ptr blockPtr, size_t byteCnt, Bool wait)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function prototype of cache writeback function: Writes back the memory within the range of blockPtr and blockPtr + byteCnt. 
<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>If <code>wait</code> is <code>TRUE</code>, wait for the writeback to complete before returning from this fuction call. </dd></dl>

<p>
Definition at line <a class="el" href="dskt2_8h-source.html#l00057">57</a> of file <a class="el" href="dskt2_8h-source.html">dskt2.h</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gf946d426d6d9a95040d3967fa746cd7a"></a><!-- doxytag: member="dskt2.h::DSKT2_activateAlg" ref="gf946d426d6d9a95040d3967fa746cd7a" args="(Int scratchMutexId, IALG_Handle alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Void DSKT2_activateAlg           </td>
          <td>(</td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>scratchMutexId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>alg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepares a xDAIS algorithm instance object to start using its scratch memory. 
<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> performs all scratch memory initialization for an algorithm's instance object. After a successful return from <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a>, the algorithm's instance object is ready to be used to process data.<p>
Unless the instance is already active, <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> uses the algorithm's IALG interface function algActivate to initialize the algorithm instance's scratch buffers from persistent data memory.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> must be called before any processing or control methods of the algorithm instance can be called.<p>
DSKT2 maintains state information about current "active" algorithm instances at run-time, so that it does not perform unnecessary IALG "activation" calls when alg is already active. As part of this optimization it may call the algDeactivate method of the currently active algorithm instance in order to activate this algorithm instance (alg).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratchMutexId</em>&nbsp;</td><td>scratch-group Id used to associate the instance with a scratch group. The value must be the same id used when creating this algorithm instance.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>alg</em>&nbsp;</td><td>IALG_Handle of the algorithm instance to be activated.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>None</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>alg must be a valid handle for the algorithm's instance object returned by an earlier call to <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a><p>
If alg uses DMA (IDMA2) dmaInit must be called before calling this methed, ensuring that all of the instance's persistent memory is initialized and the object is ready to be used<p>
No other algorithm method is currently being run on this instance. This method never preempts any other method on the same instance.</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>All of the instance's persistent and scratch memory is initialized and the object is ready to be used.</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Caller ensures algorithms with the same "scratchMutexId" will not be activated simultaneously. Usually the scratch group id is associated to the priority of the task in which the algorithm is running.<p>
The implementation of the IALG algActivate() is optional by xDAIS standard. So, the instance activation makes sense only when the method is implemented by the algorithm. <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> makes proper checks to ensure correct operation even if the algorithm does not implement the algActivate() method.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a> <p>
DMAN_addAlg() </dd></dl>

</div>
</div><p>
<a class="anchor" name="g65d8c7ae9d40adcda0c92a9e51c6fd0b"></a><!-- doxytag: member="dskt2.h::DSKT2_controlAlg" ref="g65d8c7ae9d40adcda0c92a9e51c6fd0b" args="(IALG_Handle alg, IALG_Cmd cmd, IALG_Status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DSKT2_controlAlg           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>alg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ti__xdais___i_a_l_g.html#g9032f20923ef2ba1d6b88c87a20075fa">IALG_Cmd</a>&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___status.html">IALG_Status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is a convenience API to call a xDAIS algorithm instance's algControl function. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>alg</em>&nbsp;</td><td>IALG_Handle of the algorithm instance. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cmd</em>&nbsp;</td><td>IALG_Cmd structure for the control operation. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>status</em>&nbsp;</td><td>Pointer to <a class="el" href="struct_i_a_l_g___status.html">IALG_Status</a> structure for algorithm to return status.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IALG_EOK</em>&nbsp;</td><td>The control operation was successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>otherwise</em>&nbsp;</td><td>A failure occurred during the control operation</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>alg must be a valid handle for the algorithm's instance object returned by an earlier call to <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a><p>
Algorithm specific cmd values are always less than IALG_SYSCMD</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>If the control operation is successful, the return value from this operation is equal to IALG_EOK; otherwise it is equal to either IALG_EFAIL or an algorithm-specific return value<p>
If the cmd value is not recognized, the return value is not equal to IALG_EOK</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#g65d8c7ae9d40adcda0c92a9e51c6fd0b">DSKT2_controlAlg()</a> must be called only when the instance is in active state<p>
The implementation of the IALG algControl is optional by XDAIS standard. <a class="el" href="group___d_s_p_d_s_k_t2.html#g65d8c7ae9d40adcda0c92a9e51c6fd0b">DSKT2_controlAlg()</a> makes proper checks to ensure correct operation even if the algorithm does not implement algControl. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5528d73c34724bc310404da0dc2fbd69"></a><!-- doxytag: member="dskt2.h::DSKT2_createAlg" ref="g5528d73c34724bc310404da0dc2fbd69" args="(Int scratchMutexId, IALG_Fxns *fxns, IALG_Handle parent, IALG_Params *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> DSKT2_createAlg           </td>
          <td>(</td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>scratchMutexId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> *&nbsp;</td>
          <td class="paramname"> <em>fxns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and initializes a xDAIS algorithm instance object. 
<p>
It uses the algorithm's IALG interface functions to query the algorithm for its memory needs then allocates the memory for the algorithm and calls the algorithm's algInit function to let the new algorithm instance object initialize itself using the allocated memory.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> performs initialization necessary to complete the run-time creation of an algorithm's instance object. After a successful return from <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a>, the algorithm's instance object can be activated via a <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> before it can be used to process data.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> tries to dynamically allocate instance memory based on the IALG_MemSpace attribute of the requested memory. Global DSKT2 configuration settings allow OEM to designate a memory heap for each IALG_MemSpace. <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> attempts to allocate memory in the requested space, but may search for alternative heaps when preferred heap is not large enough.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratchMutexId</em>&nbsp;</td><td>Scratch-group Id for determining the shared scratch memory buffer. Value -1 is used to disable scratch sharing for this algorithm instance. A value between 0 and (DSKT2_NUM_SCRATCH_GROUPS-1) indicates a valid scratch group </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fxns</em>&nbsp;</td><td>Pointer to the algorithm's <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> table. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>Handle of parent algorithm (optional). </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>Pointer to an <a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> structure.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-NULL</em>&nbsp;</td><td>IALG_Handle for the new instance object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>Failure.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>fxns is a valid pointer to an <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> structure (containing the vtable for a XDAIS compliant algorithm)</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>If scratchMutexId is -1, all instance scratch memory is allocated as persistent (i.e. not shared) and instance operation does not require mutual exclusion<p>
With the exception of any initialization performed by algActivate and (IDMA2) dmaInit all of the instance's persistent memory is initialized and the object is ready to be used</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The parent argument is a handle to another algorithm instance object. This parameter is often NULL, indicating that no parent object exists. This parameter allows clients to create a shared algorithm instance object and pass it to other algorithm instances. For example, a parent instance object might contain global read-only tables that are used by several instances of a vocoder.</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Caller need to ensure algorithms created with the same "scratchMutexId" will not execute simultaneously<p>
On failure all memory allocated during the call (used for algorithm query, and portions of algorithm memory that were successfully allocated during the function) has been freed before <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> returns</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The params argument is a pointer to algorithm-specific parameters that are necessary for the creation and initialization of the instance object. This pointer points to the same parameters passed to the algorithm's IALG algAlloc function. However, this pointer may be NULL. In this case, algorithm's IALG function algInit, must assume default creation parameters.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a>, <a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a>, <a class="el" href="group___d_s_p_d_s_k_t2.html#g8dffa02b3ca1ff6856ce3cf610be7435">DSKT2_freeAlg()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gda6c7f86ed679447cb8f69b0c50a616c"></a><!-- doxytag: member="dskt2.h::DSKT2_createAlg2" ref="gda6c7f86ed679447cb8f69b0c50a616c" args="(Int scratchMutexId, IALG_Fxns *fxns, IALG_Handle parent, IALG_Params *params, Int extHeapId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> DSKT2_createAlg2           </td>
          <td>(</td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>scratchMutexId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> *&nbsp;</td>
          <td class="paramname"> <em>fxns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>extHeapId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and initializes a xDAIS algorithm instance object. 
<p>
It uses the algorithm's IALG interface functions to query the algorithm for its memory needs then allocates the memory for the algorithm and calls the algorithm's algInit function to let the new algorithm instance object initialize itself using the allocated memory.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a> performs initialization necessary to complete the run-time creation of an algorithm's instance object. After a successful return from <a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a>, the algorithm's instance object can be activated via a <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> before it can be used to process data.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a> tries to dynamically allocate instance memory based on the IALG_MemSpace attribute of the requested memory. Global DSKT2 configuration settings allow OEM to designate a memory heap for each IALG_MemSpace. <a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a> attempts to allocate memory in the requested space, but may search for alternative heaps when preferred heap is not large enough.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a> will attempt to use the heap specified by the input parameter, extHeapId, for all allocations in the IALG_MemSpace, IALG_ESDATA. Furthermore, this holds for any IALG_MemSpace that has been configured with the same memory segment as IALG_ESDATA. e.g., if IALG_ESDATA and IALG_SARAM3 have both been configured to use the heap in the memory segment EXTMEM, then <a class="el" href="group___d_s_p_d_s_k_t2.html#gda6c7f86ed679447cb8f69b0c50a616c">DSKT2_createAlg2()</a> will attempt to allocate memory requested in the spaces IALG_SARAM3 and IALG_ESDATA, from the heap, extHeapId.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratchMutexId</em>&nbsp;</td><td>Scratch-group Id for determining the shared scratch memory buffer. Value -1 is used to disable scratch sharing for this algorithm instance. A value between 0 and (DSKT2_NUM_SCRATCH_GROUPS-1) indicates a valid scratch group </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fxns</em>&nbsp;</td><td>Pointer to the algorithm's <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> table. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>Handle of parent algorithm (optional). </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>Pointer to an <a class="el" href="struct_i_a_l_g___params.html">IALG_Params</a> structure. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>extHeapId</em>&nbsp;</td><td>Segment Id of memory heap to be used for all allocations in memory space IALG_ESDATA. This segment will be used instead of the default external memory segment.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-NULL</em>&nbsp;</td><td>IALG_Handle for the new instance object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>Failure.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>fxns is a valid pointer to an <a class="el" href="struct_i_a_l_g___fxns.html">IALG_Fxns</a> structure (containing the vtable for a XDAIS compliant algorithm)<p>
extHeapId &gt;= 0</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>If scratchMutexId is -1, all instance scratch memory is allocated as persistent (i.e. not shared) and instance operation does not require mutual exclusion<p>
With the exception of any initialization performed by algActivate and (IDMA2) dmaInit all of the instance's persistent memory is initialized and the object is ready to be used</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The parent argument is a handle to another algorithm instance object. This parameter is often NULL, indicating that no parent object exists. This parameter allows clients to create a shared algorithm instance object and pass it to other algorithm instances. For example, a parent instance object might contain global read-only tables that are used by several instances of a vocoder.</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Caller need to ensure algorithms created with the same "scratchMutexId" will not execute simultaneously<p>
On failure all memory allocated during the call (used for algorithm query, and portions of algorithm memory that were successfully allocated during the function) has been freed before <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> returns</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The params argument is a pointer to algorithm-specific parameters that are necessary for the creation and initialization of the instance object. This pointer points to the same parameters passed to the algorithm's IALG algAlloc function. However, this pointer may be NULL. In this case, algorithm's IALG function algInit, must assume default creation parameters.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a>, <a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a>, <a class="el" href="group___d_s_p_d_s_k_t2.html#g8dffa02b3ca1ff6856ce3cf610be7435">DSKT2_freeAlg()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g74b6b6feca63328906acade37d23b597"></a><!-- doxytag: member="dskt2.h::DSKT2_deactivateAlg" ref="g74b6b6feca63328906acade37d23b597" args="(Int scratchMutexId, IALG_Handle alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Void DSKT2_deactivateAlg           </td>
          <td>(</td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>scratchMutexId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>alg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepares a xDAIS algorithm instance object to give up using its scratch memory. 
<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a> marks an algorithm's shared scratch memory as available to other instances activation. After a successful return from <a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a>, the algorithm's processing or control functions cannot be called to process data.<p>
Object's deactivation logic involves calling the algorithm's IALG interface function algDeactivate to save necessary data from the algorithm instance's scratch buffers to its persistent data memory.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a> must be called after the last processing or control methods of the algorithm instance, alg, during each execute stage of its socket operation.<p>
DSKT2 maintains state information about current "active" algorithm instances at run-time, so that it does not perform unnecessary IALG "deactivation" calls. As part of this optimization it may defer the deactivation of this algorithm instance (alg) to a later stage, i.e. when <a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> is called to activate another algorithm instance.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratchMutexId</em>&nbsp;</td><td>scratch-group Id used for determining the shared scratch memory. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>alg</em>&nbsp;</td><td>IALG_Handle of the algorithm instance to be deactivated.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>None</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>alg must be a valid handle for the algorithm's instance object returned by an earlier call to <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a><p>
No other algorithm method is currently being run on this instance. This method never preempts any other method on the same instance.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> must be called before calling this method</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The implementation of the IALG algDeactivate is optional by XDAIS standard. So, the instance deactivation makes sense only when the method is implemented by the algorithm. <a class="el" href="group___d_s_p_d_s_k_t2.html#g74b6b6feca63328906acade37d23b597">DSKT2_deactivateAlg()</a> makes proper checks to ensure correct operation even if the algorithm does not implement the algDeactivate methods.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#gf946d426d6d9a95040d3967fa746cd7a">DSKT2_activateAlg()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g2d252c736a3bb828d9f646cc379ac0e2"></a><!-- doxytag: member="dskt2.h::DSKT2_deactivateAll" ref="g2d252c736a3bb828d9f646cc379ac0e2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DSKT2_deactivateAll           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
All algorithms that have been deactivated lazily are now really deactivate. Any algorithms that are still currently active will be left as is. The number of algorithms that are still active will be returned from this call. 
<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>&gt;=0</em>&nbsp;</td><td>The number of currently active algorithms</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>Must be called with the TSK and SWI schedulers disabled. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g8dffa02b3ca1ff6856ce3cf610be7435"></a><!-- doxytag: member="dskt2.h::DSKT2_freeAlg" ref="g8dffa02b3ca1ff6856ce3cf610be7435" args="(Int scratchMutexId, IALG_Handle alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool DSKT2_freeAlg           </td>
          <td>(</td>
          <td class="paramtype">Int&nbsp;</td>
          <td class="paramname"> <em>scratchMutexId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&nbsp;</td>
          <td class="paramname"> <em>alg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes a xDAIS algorithm instance object and frees all persistent memory allocated for the instance object. 
<p>
A reference counting mechanism is implemented to free up instance scratch memory so that when the last instance within a scratch group is deleted all shared scratch memory allocated for the group is reclaimed.<p>
<a class="el" href="group___d_s_p_d_s_k_t2.html#g8dffa02b3ca1ff6856ce3cf610be7435">DSKT2_freeAlg()</a> must be called during delete stage of a socket's operation to prevent memory leaks.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratchMutexId</em>&nbsp;</td><td>scratch-group Id used for determining the shared scratch memory. Must be the same Id used when algorithm instance is created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>alg</em>&nbsp;</td><td>IALG_Handle of the algorithm instance to be deleted</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>Success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>Failure</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>alg must be a valid handle for the algorithm's instance object returned by an earlier call to <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a></dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>DSKT2 maintains allocation information about all algorithm instances created by <a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a>, so it does not call the instance algFree method before free'ing instance memory.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___d_s_p_d_s_k_t2.html#g5528d73c34724bc310404da0dc2fbd69">DSKT2_createAlg()</a> </dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2007, Texas Instruments Incorporated</small>
</body>
</html>
